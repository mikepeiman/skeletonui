import{s as oe,D as z,E as J,g as w,c as x,l as ne,h as R,F as N,d as P,i as S,m as le,k,U as K}from"../chunks/scheduler.4e08fc29.js";import{S as ie,i as re,d as A,v as ce,j as ue,k as fe,m as me,b as pe,t as de,l as he,e as p,g as r,a as C,n as y,o as ge}from"../chunks/index.c26ee3ff.js";import{g as _e}from"../chunks/globals.7f7f1b26.js";import{A as se}from"../chunks/AuthCheck.2accb33c.js";import{a as O,u as I,s as Q,d as X,b as Y,c as Z,e as $,r as ee,f as te}from"../chunks/firebase.1ddb5b14.js";import{i as q}from"../chunks/user.07ce4664.js";const{console:ve}=_e,U="C:/Users/mikep/Desktop/WebDev/skeleton-ui/src/routes/login/photo/+page.svelte";function G(n){let e,i="Uploading...",u,s;const t={c:function(){e=w("p"),e.textContent=i,u=x(),s=w("progress"),this.h()},l:function(c){e=R(c,"P",{"data-svelte-h":!0}),N(e)!=="svelte-be0b5h"&&(e.textContent=i),u=P(c),s=R(c,"PROGRESS",{class:!0}),S(s).forEach(p),this.h()},h:function(){k(e,U,47,10,1638),r(s,"class","progress progress-info w-56 mt-6"),k(s,U,48,10,1669)},m:function(c,d){C(c,e,d),C(c,u,d),C(c,s,d)},d:function(c){c&&(p(e),p(u),p(s))}};return A("SvelteRegisterBlock",{block:t,id:G.name,type:"if",source:"(45:8) {#if uploading}",ctx:n}),t}function ae(n){let e,i="Upload a Profile Photo",u,s,t,a,c,d,m,_,D="Pick a file",l,h,j,L,g,B,F,H,f=n[2]&&G(n);const T={c:function(){e=w("h2"),e.textContent=i,u=x(),s=w("form"),t=w("div"),a=w("img"),d=x(),m=w("label"),_=w("span"),_.textContent=D,l=x(),h=w("input"),j=x(),f&&f.c(),L=x(),g=w("a"),B=ne("Finish"),this.h()},l:function(o){e=R(o,"H2",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1whglfv"&&(e.textContent=i),u=P(o),s=R(o,"FORM",{class:!0});var v=S(s);t=R(v,"DIV",{class:!0});var b=S(t);a=R(b,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),d=P(b),m=R(b,"LABEL",{for:!0,class:!0});var V=S(m);_=R(V,"SPAN",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-1xba4c3"&&(_.textContent=D),V.forEach(p),l=P(b),h=R(b,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),j=P(b),f&&f.l(b),b.forEach(p),v.forEach(p),L=P(o),g=R(o,"A",{href:!0,class:!0});var W=S(g);B=le(W,"Finish"),W.forEach(p),this.h()},h:function(){var o;r(e,"class","card-title"),k(e,U,25,4,882),K(a.src,c=n[1]??((o=n[0])==null?void 0:o.photoURL)??q)||r(a,"src",c),r(a,"alt","photoURL"),r(a,"width","256"),r(a,"height","256"),r(a,"class","mx-auto"),k(a,U,29,8,1065),r(_,"class","label-text"),k(_,U,37,10,1301),r(m,"for","photoURL"),r(m,"class","label"),k(m,U,36,8,1253),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),k(h,U,39,8,1372),r(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),k(t,U,28,6,987),r(s,"class","max-w-screen-md w-full"),k(s,U,27,4,942),r(g,"href",n[3]),r(g,"class","btn btn-primary"),k(g,U,53,4,1774)},m:function(o,v){C(o,e,v),C(o,u,v),C(o,s,v),y(s,t),y(t,a),y(t,d),y(t,m),y(m,_),y(t,l),y(t,h),y(t,j),f&&f.m(t,null),C(o,L,v),C(o,g,v),y(g,B),F||(H=ge(h,"change",n[4],!1,!1,!1,!1),F=!0)},p:function(o,v){var b;v&3&&!K(a.src,c=o[1]??((b=o[0])==null?void 0:b.photoURL)??q)&&r(a,"src",c),o[2]?f||(f=G(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&r(g,"href",o[3])},d:function(o){o&&(p(e),p(u),p(s),p(L),p(g)),f&&f.d(),F=!1,H()}};return A("SvelteRegisterBlock",{block:T,id:ae.name,type:"slot",source:"(23:2) <AuthCheck>",ctx:n}),T}function M(n){let e,i;e=new se({props:{$$slots:{default:[ae]},$$scope:{ctx:n}},$$inline:!0});const u={c:function(){ue(e.$$.fragment)},l:function(t){fe(e.$$.fragment,t)},m:function(t,a){me(e,t,a),i=!0},p:function(t,[a]){const c={};a&79&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i:function(t){i||(pe(e.$$.fragment,t),i=!0)},o:function(t){de(e.$$.fragment,t),i=!1},d:function(t){he(e,t)}};return A("SvelteRegisterBlock",{block:u,id:M.name,type:"component",source:"",ctx:n}),u}function be(n,e,i){let u,s,t;z(O,"user"),J(n,O,l=>i(5,s=l)),z(I,"userData"),J(n,I,l=>i(0,t=l));let{$$slots:a={},$$scope:c}=e;ce("Page",a,[]);let d,m=!1;async function _(l){i(2,m=!0);const h=l.target.files[0];i(1,d=URL.createObjectURL(h));const j=ee(Q,`users/${s.uid}/profile.png`),L=await te(j,h);console.log("ðŸš€ ~ file: +page.svelte:17 ~ upload ~ result:",L);const g=await $(L.ref);await Z(Y(X,"users",s.uid),{photoURL:g}),i(2,m=!1)}const D=[];return Object.keys(e).forEach(l=>{!~D.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&ve.warn(`<Page> was created with unknown prop '${l}'`)}),n.$capture_state=()=>({AuthCheck:se,user:O,userData:I,storage:Q,db:X,doc:Y,updateDoc:Z,getDownloadURL:$,ref:ee,uploadBytes:te,imgjpg:q,previewURL:d,uploading:m,upload:_,href:u,$user:s,$userData:t}),n.$inject_state=l=>{"previewURL"in l&&i(1,d=l.previewURL),"uploading"in l&&i(2,m=l.uploading),"href"in l&&i(3,u=l.href)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&i(3,u=`/${t==null?void 0:t.username}/edit`)},[t,d,m,u,_]}class Le extends ie{constructor(e){super(e),re(this,e,be,M,oe,{}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:M.name})}}export{Le as component};
